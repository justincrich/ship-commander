# Auto-generated by /pixel-perfect:init
version: "2.0"
created: "2026-02-10"

# Requirements source
requirements:
  path: ".spec/prd.md"
  analyzed: true
  supplementary:
    - path: ".spec/docs/PRD.md"
      role: "reference (older version)"
    - path: ".spec/docs/tui-design-spec.md"
      role: "TUI design specification"
    - path: ".spec/docs/tui-user-personas.md"
      role: "User personas & mental models"

# Target platforms
platforms:
  - terminal-cli

# Technology stack (from PRD)
tech:
  language: go
  tui_framework: bubble-tea
  styling: lipgloss
  session_management: tmux
  state: beads

# Design aesthetic
vibe:
  primary: "charm-lcars"
  description: >
    A fusion of Charmbracelet's playful, glamorous terminal aesthetic with
    Star Trek LCARS thematic elements. The Charm side brings: clean Lipgloss
    styling, smart responsive layouts (compact mode at <120 cols), immutable
    style composition, rounded borders, and a "fun but productive" energy.
    The LCARS side brings: orange/blue/purple/pink semantic color palette,
    box-drawing panel borders, Star Trek terminology (missions, waves, gates),
    and the feeling of commanding a starship bridge. The result should feel
    like a polished Charm CLI tool that happens to be themed as a starship
    command console -- glamorous agentic coding meets Starfleet.
  keywords:
    - glamorous-terminal
    - lcars-themed
    - playful-but-productive
    - keyboard-driven
    - information-dense
    - responsive-layout

# Color palette (LCARS Classic + Charm sensibility)
colors:
  # Primary LCARS colors (from thelcars.com Classic theme)
  butterscotch: "#FF9966"      # Primary actions, active elements, Orange
  blue: "#9999CC"              # Standard information, status
  purple: "#CC99CC"            # Secondary info, planning, review
  pink: "#FF99CC"              # Alerts, notifications
  gold: "#FFAA00"              # Emphasis, selected items
  almond: "#FFAA90"            # Warm accent

  # Semantic status colors
  red_alert: "#FF3333"         # Critical errors, halted missions
  yellow_caution: "#FFCC00"    # Warnings, stuck agents
  green_ok: "#33FF33"          # Success, completed, healthy

  # Backgrounds & neutrals
  black: "#000000"             # Primary background
  dark_blue: "#1B4F8F"         # Panel backgrounds
  galaxy_gray: "#52526A"       # Inactive, disabled
  space_white: "#F5F6FA"       # Primary text (light on dark)
  light_gray: "#CCCCCC"        # Secondary text

  # Charm-influenced accents
  moonlit_violet: "#9966FF"    # Focus indicators, highlights
  ice: "#99CCFF"               # Cool information panels

# Analyzed references
references:
  urls_analyzed: 4
  sources:
    - url: "https://www.thelcars.com/colors.php"
      type: "color-palette"
      notes: "LCARS Classic theme (26 colors) - primary palette source"
    - url: "https://github.com/charmbracelet/crush"
      type: "design-reference"
      notes: "Charm aesthetic: smart-main/dumb-components, responsive compact mode, Lipgloss styling, playful-but-productive tone"
    - url: "https://github.com/charmbracelet/lipgloss"
      type: "framework"
      notes: "Styling library: immutable styles, CSS-like API, rounded/double/thick borders, adaptive colors"
    - url: "https://github.com/charmbracelet/bubbletea"
      type: "framework"
      notes: "TUI framework: Elm architecture, message-based updates, component composition"
  patterns:
    - "smart-main-model dumb-components (from Crush architecture)"
    - "compact mode at <120 cols width or <30 lines height"
    - "lipgloss JoinVertical/JoinHorizontal for layout composition"
    - "dialog stack for modal overlays (Admiral questions, approvals)"
    - "fixed panel layout with keyboard Tab navigation"
    - "LCARS box-drawing borders for panel structure"
    - "progressive disclosure: basic → advanced → executive modes"
    - "status icons with color (not color alone) for accessibility"

# Charm ecosystem libraries (MANDATORY - all components from these)
charm_libraries:
  bubbletea:
    url: "https://github.com/charmbracelet/bubbletea"
    role: "TUI framework (Elm architecture)"
  bubbles:
    url: "https://github.com/charmbracelet/bubbles"
    role: "Pre-built components"
    components: [spinner, textinput, textarea, table, progress, paginator, viewport, list, filepicker, timer, stopwatch, help, key, cursor]
  lipgloss:
    url: "https://github.com/charmbracelet/lipgloss"
    role: "Styling and layout"
    features: [borders, colors, padding, margins, JoinVertical, JoinHorizontal, Place, PlaceOverlay]
    border_styles: [NormalBorder, RoundedBorder, ThickBorder, DoubleBorder]
  huh:
    url: "https://github.com/charmbracelet/huh"
    role: "Terminal forms (ALL Admiral interactions)"
    components: [Input, Text, Select, MultiSelect, Confirm, Form]
    themes: [Charm, Dracula, Catppuccin, Base16, Default]
  harmonica:
    url: "https://github.com/charmbracelet/harmonica"
    role: "Physics-based spring animations"
    api: "NewSpring(timeDelta, angularFrequency, dampingRatio)"
    presets:
      under_damped: "ratio < 1.0 -- bouncy oscillation (alerts, attention)"
      critically_damped: "ratio = 1.0 -- snappy, no overshoot (view switches)"
      over_damped: "ratio > 1.0 -- smooth approach (progress, subtle)"

# Interaction principles (USER PREFERENCES - MANDATORY)
interaction:
  principles:
    - "Arrow keys (Up/Down) browse ALL interactable items within a panel"
    - "Enter drills into selected item (agent → agent detail, mission → mission detail)"
    - "Escape pops back to previous view (stack-based navigation)"
    - "Tab/Shift+Tab cycles between panels (not individual items)"
    - "Each screen shows ONE workflow context -- don't overload with unrelated information"
    - "Show different views based on what the user is DOING (planning vs executing vs reviewing)"
    - "Minimize visual clutter -- only show what's relevant to the current task"
    - "Every interactable item must have a visible selection highlight (reverse video or border color)"
  keyboard_plan:
    global:
      Tab: "Next panel"
      Shift+Tab: "Previous panel"
      Enter: "Drill into / Select"
      Escape: "Back / Dismiss"
      "?": "Help overlay"
      q: "Quit"
      Ctrl+C: "Force quit"
    within_panel:
      Up: "Previous item"
      Down: "Next item"
      Home: "First item"
      End: "Last item"
    navigable_toolbar:
      Left: "Highlight previous toolbar button"
      Right: "Highlight next toolbar button"
      Enter: "Activate highlighted toolbar button"
      note: "Quick keys (shown on each button) also work directly"
    plan_review:
      a: "Approve plan"
      f: "Give feedback"
      s: "Shelve plan"
    ship_bridge:
      h: "Halt selected mission/agent"
      r: "Retry selected mission/agent (from ready-room)"
      Space: "Pause/resume propulsion"
      w: "Wave manager"
  screen_philosophy: >
    Each screen serves ONE purpose. Fleet Overview shows the fleet.
    Ship Bridge shows one ship's execution. Ready Room shows planning.
    Plan Review shows the manifest with analysis. Don't mix concerns --
    if something needs detail, give it a dedicated drill-down view.
    Every view ends with a NavigableToolbar that shows where you can go
    (arrow Left/Right to highlight, Enter to select, or press quick key).
    Navigation is fleet-centric: Fleet → Ship → Ready Room → Plan Review.
    No separate planning/execution modes -- unified hierarchy.

# Design modes (from user personas doc)
modes:
  basic:
    description: "Simplified view for novice users"
    panels_hidden: ["dependency-graph", "wave-summary", "gate-details"]
    terminology: "hybrid"
  advanced:
    description: "Full LCARS experience for power users"
    panels_visible: "all"
    terminology: "star-trek"
  executive:
    description: "Aggregated metrics for managers"
    panels_hidden: ["agent-details", "gate-details", "logs"]
    terminology: "business"

# Key TUI views (fleet-centric hierarchy)
views:
  - name: "fleet-overview"
    description: "Landing screen. Ship card grid with preview panel. One ship per directive."
    priority: high
  - name: "ship-bridge"
    description: "Per-ship execution: crew panel, mission board, event log, inline wave summary"
    priority: high
  - name: "ready-room"
    description: "Per-ship planning: specialist grid, directive viewport, planning status"
    priority: high
  - name: "plan-review"
    description: "Full-screen drill-down: mission manifest + coverage matrix + dependency graph"
    priority: high
  - name: "mission-detail"
    description: "Per-mission drill-down: AC phase detail (TDD pipeline), gate evidence, output"
    priority: high
  - name: "agent-detail"
    description: "Per-agent drill-down: output stream, assigned mission, phase, health"
    priority: medium
  - name: "fleet-monitor"
    description: "Condensed multi-ship status grid. Each ship = one ShipStatusRow line."
    priority: medium
  - name: "agent-roster"
    description: "Cross-ship agent inventory with role, assignment, status"
    priority: medium
  - name: "directive-editor"
    description: "PRD/directive input form with ship assignment"
    priority: medium
  - name: "message-center"
    description: "Cross-ship message inbox for Admiral questions and notifications"
    priority: medium
  - name: "wave-manager"
    description: "Wave dependency graph, merge controls, wave advancement"
    priority: low
  - name: "project-settings"
    description: "Global config: verification gates (bash commands), crew defaults, fleet defaults, export/import"
    priority: medium
  - name: "admiral-question-modal"
    description: "Global overlay for agent-to-Admiral questions with options, free text, broadcast"
    priority: high
